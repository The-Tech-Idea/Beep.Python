<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Getting Started - Beep.Python.PackageManagement</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <link href="assets/styles.css" rel="stylesheet">
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" onclick="toggleSidebar()">
        <i class="bi bi-list"></i>
    </button>

    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
        <i class="bi bi-sun-fill" id="theme-icon"></i>
    </button>

    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <!-- Navigation will be loaded dynamically -->
        </aside>

        <!-- Main Content -->
        <main class="content">
            <div class="content-wrapper">
                <!-- Page Header -->
                <div class="page-header">
                    <div class="header-content">
                        <h1><i class="bi bi-rocket text-primary"></i> Getting Started</h1>
                        <p class="lead">Quick start guide for Beep.Python.PackageManagement v1.0.16</p>
                    </div>
                </div>

                <!-- Quick Overview -->
                <section class="section" id="overview">
                    <h2>?? What's New in v1.0.16</h2>
                    <div class="info-box">
                        <h5><i class="bi bi-info-circle"></i> Architecture Improvements</h5>
                        <ul>
                            <li><strong>Consolidated Architecture:</strong> PackageOperationManager functionality merged into PythonPackageManager</li>
                            <li><strong>Enhanced Session Management:</strong> Improved multi-user session support with proper isolation</li>
                            <li><strong>Async/Await Support:</strong> Full asynchronous operations with cancellation token support</li>
                            <li><strong>Streamlined Dependencies:</strong> Simplified dependency injection and initialization</li>
                            <li><strong>Better Error Handling:</strong> Comprehensive error handling and progress reporting</li>
                        </ul>
                    </div>
                </section>

                <!-- Installation -->
                <section class="section" id="installation">
                    <h2>?? Installation</h2>
                    
                    <div class="code-example">
                        <h4>NuGet Package Manager</h4>
                        <pre><code class="language-powershell">Install-Package Beep.Python.PackageManagement -Version 1.0.16</code></pre>
                    </div>

                    <div class="code-example">
                        <h4>.NET CLI</h4>
                        <pre><code class="language-bash">dotnet add package Beep.Python.PackageManagement --version 1.0.16</code></pre>
                    </div>

                    <div class="code-example">
                        <h4>Package Reference (Manual)</h4>
                        <pre><code class="language-xml">&lt;PackageReference Include="Beep.Python.PackageManagement" Version="1.0.16" /&gt;</code></pre>
                    </div>

                    <div class="tip">
                        <h5><i class="bi bi-lightbulb"></i> Dependencies</h5>
                        <p>The package automatically includes required dependencies:</p>
                        <ul>
                            <li><code>Beep.Python.Model</code> - Core data models and interfaces</li>
                            <li><code>Beep.Python.Runtime.PythonNet</code> - Python runtime management</li>
                            <li><code>TheTechIdea.Beep.DataManagementModels</code> - Base framework models</li>
                        </ul>
                    </div>
                </section>

                <!-- Basic Setup -->
                <section class="section" id="basic-setup">
                    <h2>?? Basic Setup</h2>
                    
                    <div class="code-example">
                        <h4>1. Initialize Required Services</h4>
                        <pre><code class="language-csharp">using Beep.Python.PackageManagement;
using Beep.Python.Model;
using TheTechIdea.Beep.Container.Services;

// Initialize the core services
var beepService = new BeepService();
var pythonRuntime = new PythonNetRunTimeManager(beepService);
var virtualEnvManager = new PythonVirtualEnvManager(beepService, pythonRuntime);
var sessionManager = new PythonSessionManager(beepService, pythonRuntime);</code></pre>
                    </div>

                    <div class="code-example">
                        <h4>2. Create Package Manager</h4>
                        <pre><code class="language-csharp">// Create the package manager with all dependencies
var packageManager = new PythonPackageManager(
    beepService, 
    pythonRuntime, 
    virtualEnvManager, 
    sessionManager);

// Optional: Set up progress reporting
var progress = new Progress&lt;PassedArgs&gt;(args =>
{
    Console.WriteLine($"[{args.EventType}] {args.Messege}");
    if (args.Flag == Errors.Failed)
    {
        Console.WriteLine($"? Error: {args.Messege}");
    }
});
packageManager.Progress = progress;</code></pre>
                    </div>

                    <div class="code-example">
                        <h4>3. Configure Session</h4>
                        <pre><code class="language-csharp">// Configure session for a specific user and environment
string username = "john.doe";
string environmentId = "data-science-env"; // optional

bool configured = packageManager.ConfigureSessionForUser(username, environmentId);
if (!configured)
{
    throw new InvalidOperationException("Failed to configure session");
}

// Verify session configuration
if (packageManager.IsSessionConfigured())
{
    var session = packageManager.GetConfiguredSession();
    var environment = packageManager.GetConfiguredVirtualEnvironment();
    
    Console.WriteLine($"? Session configured for user: {session?.Username}");
    Console.WriteLine($"?? Environment: {environment?.EnvironmentName}");
}</code></pre>
                    </div>
                </section>

                <!-- First Package Operations -->
                <section class="section" id="first-operations">
                    <h2>?? Your First Package Operations</h2>
                    
                    <div class="code-example">
                        <h4>Install Packages</h4>
                        <pre><code class="language-csharp">// Install packages with async support
using var cts = new CancellationTokenSource(TimeSpan.FromMinutes(5));

try
{
    // Install essential data science packages
    bool pandasInstalled = await packageManager.InstallNewPackageWithSessionAsync("pandas", cts.Token);
    bool numpyInstalled = await packageManager.InstallNewPackageWithSessionAsync("numpy", cts.Token);
    bool matplotlibInstalled = await packageManager.InstallNewPackageWithSessionAsync("matplotlib", cts.Token);
    
    Console.WriteLine($"?? Pandas: {(pandasInstalled ? "? Installed" : "? Failed")}");
    Console.WriteLine($"?? NumPy: {(numpyInstalled ? "? Installed" : "? Failed")}");
    Console.WriteLine($"?? Matplotlib: {(matplotlibInstalled ? "? Installed" : "? Failed")}");
}
catch (OperationCanceledException)
{
    Console.WriteLine("? Installation timed out");
}</code></pre>
                    </div>

                    <div class="code-example">
                        <h4>Auto-Categorize Packages</h4>
                        <pre><code class="language-csharp">// Automatically categorize installed packages
bool categorized = packageManager.PopulateCommonPackageCategories();
Console.WriteLine($"??? Auto-categorization: {(categorized ? "? Complete" : "? Failed")}");

// View categorized packages
var dataPackages = packageManager.GetPackagesByCategory(PackageCategory.DataScience);
var mlPackages = packageManager.GetPackagesByCategory(PackageCategory.MachineLearning);

Console.WriteLine($"?? Data Science packages: {dataPackages.Count}");
Console.WriteLine($"?? Machine Learning packages: {mlPackages.Count}");

// List packages in each category
foreach (var package in dataPackages)
{
    Console.WriteLine($"  ?? {package.PackageName} v{package.Version}");
}</code></pre>
                    </div>

                    <div class="code-example">
                        <h4>Refresh and Update Information</h4>
                        <pre><code class="language-csharp">// Refresh all package information
bool refreshed = await packageManager.RefreshAllPackagesWithSessionAsync(cts.Token);
Console.WriteLine($"?? Package refresh: {(refreshed ? "? Complete" : "? Failed")}");

// Get current environment state
var environment = packageManager.GetConfiguredVirtualEnvironment();
if (environment?.InstalledPackages != null)
{
    Console.WriteLine($"?? Total packages installed: {environment.InstalledPackages.Count}");
    
    // Show packages that need updates
    var outdatedPackages = environment.InstalledPackages
        .Where(p => p.Buttondisplay == "Update")
        .ToList();
        
    if (outdatedPackages.Any())
    {
        Console.WriteLine($"?? Packages with updates available: {outdatedPackages.Count}");
        foreach (var pkg in outdatedPackages)
        {
            Console.WriteLine($"  ?? {pkg.PackageName}: {pkg.Version} ? {pkg.Updateversion}");
        }
    }
}</code></pre>
                    </div>
                </section>

                <!-- Requirements Files -->
                <section class="section" id="requirements-files">
                    <h2>?? Working with Requirements Files</h2>
                    
                    <div class="code-example">
                        <h4>Install from Requirements File</h4>
                        <pre><code class="language-csharp">// Create a sample requirements file content
string requirementsContent = @"
pandas>=2.0.0
numpy>=1.24.0
matplotlib>=3.7.0
scikit-learn>=1.3.0
jupyter>=1.0.0
";

// Save to file
string requirementsPath = "data-science-requirements.txt";
await File.WriteAllTextAsync(requirementsPath, requirementsContent);

// Install from requirements file
bool installed = await packageManager.InstallFromRequirementsFileWithSessionAsync(
    requirementsPath, 
    cts.Token);

Console.WriteLine($"?? Requirements installation: {(installed ? "? Complete" : "? Failed")}");</code></pre>
                    </div>

                    <div class="code-example">
                        <h4>Generate Requirements File</h4>
                        <pre><code class="language-csharp">// Generate requirements file from current environment
string outputPath = "current-requirements.txt";
bool generated = packageManager.GenerateRequirementsFile(
    outputPath, 
    includeVersions: true);

if (generated)
{
    Console.WriteLine($"?? Requirements file generated: {outputPath}");
    
    // Read and display the generated file
    string content = await File.ReadAllTextAsync(outputPath);
    Console.WriteLine("Generated requirements:");
    Console.WriteLine(content);
}</code></pre>
                    </div>
                </section>

                <!-- Package Sets -->
                <section class="section" id="package-sets">
                    <h2>?? Using Package Sets</h2>
                    
                    <div class="code-example">
                        <h4>View Available Package Sets</h4>
                        <pre><code class="language-csharp">// Get all available package sets
var availableSets = packageManager.GetAvailablePackageSets();

Console.WriteLine("?? Available Package Sets:");
foreach (var set in availableSets)
{
    Console.WriteLine($"\n?? {set.Key}:");
    foreach (var package in set.Value.Take(5)) // Show first 5 packages
    {
        Console.WriteLine($"  ?? {package.PackageName}");
    }
    
    if (set.Value.Count > 5)
    {
        Console.WriteLine($"  ... and {set.Value.Count - 5} more packages");
    }
}</code></pre>
                    </div>

                    <div class="code-example">
                        <h4>Install Package Set</h4>
                        <pre><code class="language-csharp">// Install a complete package set (if available)
string setName = "data-science-essentials"; // Example set name

bool setInstalled = packageManager.InstallPackageSet(setName);
Console.WriteLine($"?? Package set '{setName}': {(setInstalled ? "? Installed" : "? Failed")}");

// Create custom package set from current environment
bool customSetSaved = packageManager.SavePackageSetFromCurrentEnvironment(
    "my-project-setup",
    "Complete package setup for my data science project");

Console.WriteLine($"?? Custom set saved: {(customSetSaved ? "? Success" : "? Failed")}");</code></pre>
                    </div>
                </section>

                <!-- Error Handling -->
                <section class="section" id="error-handling">
                    <h2>??? Error Handling Best Practices</h2>
                    
                    <div class="code-example">
                        <h4>Comprehensive Error Handling</h4>
                        <pre><code class="language-csharp">try
{
    // Check if session is configured before operations
    if (!packageManager.IsSessionConfigured())
    {
        throw new InvalidOperationException("Session must be configured before package operations");
    }
    
    // Check if package manager is busy
    if (packageManager.IsBusy)
    {
        Console.WriteLine("? Package manager is busy, waiting...");
        // Wait or implement retry logic
        await Task.Delay(1000);
    }
    
    // Perform package operations with timeout
    using var cts = new CancellationTokenSource(TimeSpan.FromMinutes(10));
    
    bool success = await packageManager.InstallNewPackageWithSessionAsync(
        "tensorflow", 
        cts.Token);
        
    if (!success)
    {
        throw new InvalidOperationException("Package installation failed");
    }
    
    Console.WriteLine("? Package installed successfully");
}
catch (OperationCanceledException)
{
    Console.WriteLine("? Operation was cancelled due to timeout");
}
catch (InvalidOperationException ex) when (ex.Message.Contains("Session"))
{
    Console.WriteLine($"?? Session configuration error: {ex.Message}");
    // Attempt to reconfigure session
}
catch (Exception ex)
{
    Console.WriteLine($"? Unexpected error: {ex.Message}");
    // Log error and potentially retry
}
finally
{
    // Cleanup if needed
    Console.WriteLine("?? Cleanup completed");
}</code></pre>
                    </div>
                </section>

                <!-- Complete Example -->
                <section class="section" id="complete-example">
                    <h2>?? Complete Example</h2>
                    
                    <div class="code-example">
                        <h4>Full Package Management Workflow</h4>
                        <pre><code class="language-csharp">using Beep.Python.PackageManagement;
using Beep.Python.Model;
using TheTechIdea.Beep.Container.Services;

public class PackageManagementExample
{
    public static async Task Main(string[] args)
    {
        // Initialize services
        var beepService = new BeepService();
        var pythonRuntime = new PythonNetRunTimeManager(beepService);
        var virtualEnvManager = new PythonVirtualEnvManager(beepService, pythonRuntime);
        var sessionManager = new PythonSessionManager(beepService, pythonRuntime);

        // Create package manager
        using var packageManager = new PythonPackageManager(
            beepService, pythonRuntime, virtualEnvManager, sessionManager);

        // Set up progress reporting
        packageManager.Progress = new Progress&lt;PassedArgs&gt;(args =>
            Console.WriteLine($"[{DateTime.Now:HH:mm:ss}] {args.Messege}"));

        try
        {
            // Configure session
            if (!packageManager.ConfigureSessionForUser("data-scientist", "ml-env"))
            {
                throw new InvalidOperationException("Failed to configure session");
            }

            Console.WriteLine("?? Starting package management workflow...");

            // Install essential packages
            using var cts = new CancellationTokenSource(TimeSpan.FromMinutes(15));
            
            var packagesToInstall = new[] { "pandas", "numpy", "matplotlib", "scikit-learn" };
            
            foreach (var package in packagesToInstall)
            {
                Console.WriteLine($"?? Installing {package}...");
                bool installed = await packageManager.InstallNewPackageWithSessionAsync(package, cts.Token);
                Console.WriteLine($"  {(installed ? "?" : "?")} {package}");
            }

            // Auto-categorize packages
            Console.WriteLine("??? Auto-categorizing packages...");
            packageManager.PopulateCommonPackageCategories();

            // Refresh package information
            Console.WriteLine("?? Refreshing package information...");
            await packageManager.RefreshAllPackagesWithSessionAsync(cts.Token);

            // Display results
            var environment = packageManager.GetConfiguredVirtualEnvironment();
            if (environment?.InstalledPackages != null)
            {
                Console.WriteLine($"\n?? Package Summary:");
                Console.WriteLine($"Total packages: {environment.InstalledPackages.Count}");
                
                var categoryCounts = environment.InstalledPackages
                    .GroupBy(p => p.Category)
                    .ToDictionary(g => g.Key, g => g.Count());
                
                foreach (var category in categoryCounts)
                {
                    Console.WriteLine($"  {category.Key}: {category.Value} packages");
                }
            }

            // Generate requirements file
            Console.WriteLine("\n?? Generating requirements file...");
            bool generated = packageManager.GenerateRequirementsFile(
                "generated-requirements.txt", 
                includeVersions: true);
            
            Console.WriteLine($"Requirements file: {(generated ? "? Generated" : "? Failed")}");

            Console.WriteLine("\n?? Workflow completed successfully!");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"? Error: {ex.Message}");
        }
    }
}</code></pre>
                    </div>
                </section>

                <!-- Next Steps -->
                <section class="section" id="next-steps">
                    <h2>?? Next Steps</h2>
                    
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h4><i class="bi bi-book"></i> API Reference</h4>
                            <p>Explore the complete API documentation for all classes and methods</p>
                            <a href="api-reference.html" class="btn btn-outline-primary">View API Reference</a>
                        </div>
                        
                        <div class="feature-card">
                            <h4><i class="bi bi-people"></i> Multi-User Sessions</h4>
                            <p>Learn about advanced session management for multi-user environments</p>
                            <a href="#session-management" class="btn btn-outline-primary">Session Management</a>
                        </div>
                        
                        <div class="feature-card">
                            <h4><i class="bi bi-gear"></i> Advanced Features</h4>
                            <p>Discover advanced package management features and enterprise integration</p>
                            <a href="#advanced-features" class="btn btn-outline-primary">Advanced Features</a>
                        </div>
                        
                        <div class="feature-card">
                            <h4><i class="bi bi-question-circle"></i> Troubleshooting</h4>
                            <p>Common issues and solutions for package management operations</p>
                            <a href="#troubleshooting" class="btn btn-outline-primary">Troubleshooting</a>
                        </div>
                    </div>
                </section>

                <!-- Navigation Links -->
                <div class="nav-links">
                    <a href="index.html" class="btn-beep">
                        <i class="bi bi-house"></i> Documentation Home
                    </a>
                    <a href="api-reference.html" class="btn-beep">
                        <i class="bi bi-book"></i> API Reference
                    </a>
                </div>

                <!-- Footer -->
                <footer class="documentation-footer">
                    <div class="footer-content">
                        <div class="footer-copyright">
                            <p>&copy; 2024 The Tech Idea - Beep.Python.PackageManagement Getting Started Guide</p>
                        </div>
                        <div class="footer-links">
                            <a href="index.html">Home</a>
                            <a href="#installation">Installation</a>
                            <a href="#basic-setup">Setup</a>
                            <a href="#complete-example">Examples</a>
                        </div>
                    </div>
                </footer>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="assets/navigation.js"></script>
</body>
</html>