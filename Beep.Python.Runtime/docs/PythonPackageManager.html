<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PythonPackageManager - Beep.Python.Runtime.PythonNet</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" onclick="toggleSidebar()">
        <i class="bi bi-list"></i>
    </button>

    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
        <i class="bi bi-sun-fill" id="theme-icon"></i>
    </button>

    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <!-- Navigation will be loaded dynamically by navigation.js -->
        </aside>

        <!-- Main Content -->
        <main class="content">
            <div class="content-wrapper">
                <!-- Breadcrumb -->
                <nav class="breadcrumb-nav">
                    <a href="index.html">Home</a>
                    <span>?</span>
                    <a href="#">Manager Classes</a>
                    <span>?</span>
                    <span>Python Package Manager</span>
                </nav>

                <!-- Page Header -->
                <div class="page-header">
                    <h1>?? PythonPackageManager</h1>
                    <p class="page-subtitle">Comprehensive Python package management with pip/conda integration, requirements files, and package categorization</p>
                </div>

                <!-- Class Info -->
                <div class="class-info">
                    <div class="class-namespace">namespace <strong>Beep.Python.RuntimeEngine.PackageManagement</strong></div>
                    <p>Main manager for Python package operations. Coordinates specialized managers for different package-related functions.</p>
                    <div class="class-implements">
                        Implements: <code>IPythonPackageManager</code>, <code>IDisposable</code>
                    </div>
                </div>

                <!-- Table of Contents -->
                <div class="toc">
                    <h3>?? Table of Contents</h3>
                    <ul>
                        <li><a href="#overview">Overview</a></li>
                        <li><a href="#features">Key Features</a></li>
                        <li><a href="#properties">Properties</a></li>
                        <li><a href="#methods">Methods</a></li>
                        <li><a href="#usage-examples">Usage Examples</a></li>
                        <li><a href="#best-practices">Best Practices</a></li>
                        <li><a href="#see-also">See Also</a></li>
                    </ul>
                </div>

                <!-- Overview -->
                <section class="section" id="overview">
                    <h2>Overview</h2>
                    <p>
                        The <code>PythonPackageManager</code> provides comprehensive package management capabilities for Python environments. 
                        It orchestrates multiple specialized managers to handle package installation, upgrades, requirements files, 
                        categorization, and package sets with full async support and progress reporting.
                    </p>
                    
                    <p>
                        This manager integrates with virtual environments and sessions to provide isolated package management, 
                        supporting both pip and conda package managers with advanced features like bulk operations, 
                        automatic categorization, and package set management for reproducible environments.
                    </p>
                </section>

                <!-- Key Features -->
                <section class="section" id="features">
                    <h2>Key Features</h2>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h3>?? Package Operations</h3>
                            <p>Install, upgrade, uninstall packages with progress tracking and error handling</p>
                        </div>
                        <div class="feature-card">
                            <h3>?? Requirements Management</h3>
                            <p>Generate and install from requirements.txt files for reproducible environments</p>
                        </div>
                        <div class="feature-card">
                            <h3>??? Package Categorization</h3>
                            <p>Automatic categorization of packages by purpose (ML, Data Science, Web, etc.)</p>
                        </div>
                        <div class="feature-card">
                            <h3>?? Package Sets</h3>
                            <p>Predefined package collections for common development scenarios</p>
                        </div>
                        <div class="feature-card">
                            <h3>?? Bulk Operations</h3>
                            <p>Upgrade all packages, install from lists, batch operations with progress</p>
                        </div>
                        <div class="feature-card">
                            <h3>?? Environment Isolation</h3>
                            <p>Full integration with virtual environments for isolated package management</p>
                        </div>
                    </div>
                </section>

                <!-- Properties -->
                <section class="section" id="properties">
                    <h2>Properties</h2>
                    
                    <h3>Core Properties</h3>
                    <table class="property-table">
                        <thead>
                            <tr>
                                <th>Property</th>
                                <th>Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>Editor</code></td>
                                <td>IDMEEditor</td>
                                <td>Gets the DME editor instance for logging and configuration access</td>
                            </tr>
                            <tr>
                                <td><code>UnitofWork</code></td>
                                <td>UnitofWork&lt;PackageDefinition&gt;</td>
                                <td>Gets or sets the unit of work for tracking package changes</td>
                            </tr>
                            <tr>
                                <td><code>Progress</code></td>
                                <td>IProgress&lt;PassedArgs&gt;</td>
                                <td>Gets or sets the progress reporter for operations</td>
                            </tr>
                            <tr>
                                <td><code>Token</code></td>
                                <td>CancellationToken</td>
                                <td>Gets the cancellation token for stopping operations</td>
                            </tr>
                            <tr>
                                <td><code>IsBusy</code></td>
                                <td>bool</td>
                                <td>Gets whether the manager is currently performing an operation</td>
                            </tr>
                        </tbody>
                    </table>
                </section>

                <!-- Methods -->
                <section class="section" id="methods">
                    <h2>Methods</h2>

                    <h3>Package Management Core Methods</h3>
                    <ul class="member-list">
                        <li>
                            <div class="member-name">InstallNewPackageAsync(string packageName)</div>
                            <div class="member-type">bool</div>
                            <div class="member-desc">Installs a new package in the current environment</div>
                        </li>
                        <li>
                            <div class="member-name">UnInstallPackageAsync(string packageName)</div>
                            <div class="member-type">bool</div>
                            <div class="member-desc">Uninstalls a package from the current environment</div>
                        </li>
                        <li>
                            <div class="member-name">UpgradePackageAsync(string packageName)</div>
                            <div class="member-type">bool</div>
                            <div class="member-desc">Upgrades a specific package in the current environment</div>
                        </li>
                        <li>
                            <div class="member-name">UpgradeAllPackagesAsync()</div>
                            <div class="member-type">bool</div>
                            <div class="member-desc">Upgrades all packages in the current environment</div>
                        </li>
                        <li>
                            <div class="member-name">RefreshAllPackagesAsync()</div>
                            <div class="member-type">bool</div>
                            <div class="member-desc">Refreshes information for all packages in the current environment</div>
                        </li>
                        <li>
                            <div class="member-name">RefreshPackageAsync(string packageName)</div>
                            <div class="member-type">bool</div>
                            <div class="member-desc">Refreshes information for a specific package in the current environment</div>
                        </li>
                        <li>
                            <div class="member-name">InstallPipToolAsync()</div>
                            <div class="member-type">bool</div>
                            <div class="member-desc">Installs or upgrades the pip package manager</div>
                        </li>
                    </ul>

                    <h3>Requirements File Management</h3>
                    <ul class="member-list">
                        <li>
                            <div class="member-name">InstallFromRequirementsFile(string filePath)</div>
                            <div class="member-type">bool</div>
                            <div class="member-desc">Installs packages from a requirements file into the current environment</div>
                        </li>
                        <li>
                            <div class="member-name">GenerateRequirementsFile(string filePath, bool includeVersions = true)</div>
                            <div class="member-type">bool</div>
                            <div class="member-desc">Generates a requirements file from the packages installed in the current environment</div>
                        </li>
                        <li>
                            <div class="member-name">UpdateVirtualEnvironmentWithRequirementsFile(PythonVirtualEnvironment environment)</div>
                            <div class="member-type">bool</div>
                            <div class="member-desc">Updates a virtual environment with packages from its requirements file</div>
                        </li>
                    </ul>

                    <h3>Package Category Management</h3>
                    <ul class="member-list">
                        <li>
                            <div class="member-name">GetPackagesByCategory(PackageCategory category)</div>
                            <div class="member-type">ObservableBindingList&lt;PackageDefinition&gt;</div>
                            <div class="member-desc">Gets packages in a specific category from the current environment</div>
                        </li>
                        <li>
                            <div class="member-name">SetPackageCategory(string packageName, PackageCategory category)</div>
                            <div class="member-type">void</div>
                            <div class="member-desc">Sets the category for a specific package in the current environment</div>
                        </li>
                        <li>
                            <div class="member-name">UpdatePackageCategories(Dictionary&lt;string, PackageCategory&gt; packageCategories)</div>
                            <div class="member-type">void</div>
                            <div class="member-desc">Updates categories for multiple packages at once</div>
                        </li>
                        <li>
                            <div class="member-name">PopulateCommonPackageCategories()</div>
                            <div class="member-type">bool</div>
                            <div class="member-desc">Populates common package categories based on known package names</div>
                        </li>
                        <li>
                            <div class="member-name">SuggestCategoriesForPackages(IEnumerable&lt;string&gt; packageNames)</div>
                            <div class="member-type">Task&lt;Dictionary&lt;string, PackageCategory&gt;&gt;</div>
                            <div class="member-desc">Suggests categories for packages based on their names and descriptions</div>
                        </li>
                    </ul>

                    <h3>Package Set Management</h3>
                    <ul class="member-list">
                        <li>
                            <div class="member-name">InstallPackageSet(string setName)</div>
                            <div class="member-type">bool</div>
                            <div class="member-desc">Installs all packages from a predefined package set</div>
                        </li>
                        <li>
                            <div class="member-name">GetAvailablePackageSets()</div>
                            <div class="member-type">Dictionary&lt;string, List&lt;PackageDefinition&gt;&gt;</div>
                            <div class="member-desc">Gets a dictionary of available package set names and their package lists</div>
                        </li>
                        <li>
                            <div class="member-name">SavePackageSetFromCurrentEnvironment(string setName, string description = "")</div>
                            <div class="member-type">bool</div>
                            <div class="member-desc">Creates a new package set from the currently installed packages</div>
                        </li>
                    </ul>

                    <h3>Session and Environment Management</h3>
                    <ul class="member-list">
                        <li>
                            <div class="member-name">SetActiveSessionAndEnvironment(PythonSessionInfo session, PythonVirtualEnvironment environment)</div>
                            <div class="member-type">void</div>
                            <div class="member-desc">Sets the active session and environment for package operations</div>
                        </li>
                    </ul>
                </section>

                <!-- Usage Examples -->
                <section class="section" id="usage-examples">
                    <h2>Usage Examples</h2>

                    <div class="code-example">
                        <h3>Basic Package Installation</h3>
                        <pre><code class="language-csharp">// Initialize package manager with environment and session
var environment = envManager.ManagedVirtualEnvironments
    .FirstOrDefault(e => e.Name == "data-science-env");
var session = runtimeManager.GetOrCreateDefaultSession();

var packageManager = new PythonPackageManager(
    beepService,
    runtimeManager,
    envManager,
    environment,
    session,
    sessionManager);

// Install individual packages
bool installed = packageManager.InstallNewPackageAsync("numpy");
if (installed)
{
    Console.WriteLine("NumPy installed successfully");
    
    // Refresh package information
    packageManager.RefreshPackageAsync("numpy");
}

// Install multiple packages
var packages = new[] { "pandas", "matplotlib", "seaborn", "scikit-learn" };
foreach (var pkg in packages)
{
    Console.WriteLine($"Installing {pkg}...");
    bool result = packageManager.InstallNewPackageAsync(pkg);
    Console.WriteLine(result ? "Success" : "Failed");
}</code></pre>
                    </div>

                    <div class="code-example">
                        <h3>Requirements File Management</h3>
                        <pre><code class="language-csharp">// Generate requirements file from current environment
string requirementsPath = @"C:\Projects\MyProject\requirements.txt";
bool generated = packageManager.GenerateRequirementsFile(requirementsPath, true);

if (generated)
{
    Console.WriteLine($"Requirements file generated: {requirementsPath}");
    
    // Read and display the contents
    string[] lines = File.ReadAllLines(requirementsPath);
    Console.WriteLine("Installed packages:");
    foreach (string line in lines)
    {
        Console.WriteLine($"  {line}");
    }
}

// Install packages from requirements file in another environment
var newEnvironment = envManager.ManagedVirtualEnvironments
    .FirstOrDefault(e => e.Name == "production-env");

if (newEnvironment != null)
{
    // Switch to the new environment
    packageManager.SetActiveSessionAndEnvironment(session, newEnvironment);
    
    // Install from requirements file
    bool installed = packageManager.InstallFromRequirementsFile(requirementsPath);
    if (installed)
    {
        Console.WriteLine("All packages installed from requirements file");
        packageManager.RefreshAllPackagesAsync();
    }
}</code></pre>
                    </div>

                    <div class="code-example">
                        <h3>Package Categorization and Management</h3>
                        <pre><code class="language-csharp">// Populate automatic package categories
packageManager.PopulateCommonPackageCategories();

// Get packages by category
var mlPackages = packageManager.GetPackagesByCategory(PackageCategory.MachineLearning);
var dataPackages = packageManager.GetPackagesByCategory(PackageCategory.DataScience);
var webPackages = packageManager.GetPackagesByCategory(PackageCategory.WebDevelopment);

Console.WriteLine($"Machine Learning packages: {mlPackages.Count}");
foreach (var pkg in mlPackages)
{
    Console.WriteLine($"  - {pkg.PackageName} ({pkg.Version})");
}

// Set custom categories for specific packages
packageManager.SetPackageCategory("fastapi", PackageCategory.WebDevelopment);
packageManager.SetPackageCategory("tensorflow", PackageCategory.MachineLearning);
packageManager.SetPackageCategory("requests", PackageCategory.Utilities);

// Bulk category updates
var categoryUpdates = new Dictionary&lt;string, PackageCategory&gt
{
    ["django"] = PackageCategory.WebDevelopment,
    ["flask"] = PackageCategory.WebDevelopment,
    ["pytorch"] = PackageCategory.MachineLearning,
    ["opencv-python"] = PackageCategory.ComputerVision
};
packageManager.UpdatePackageCategories(categoryUpdates);</code></pre>
                    </div>

                    <div class="code-example">
                        <h3>Package Set Management</h3>
                        <pre><code class="language-csharp">// Get available package sets
var availableSets = packageManager.GetAvailablePackageSets();
Console.WriteLine("Available package sets:");
foreach (var set in availableSets)
{
    Console.WriteLine($"  {set.Key}: {set.Value.Count} packages");
}

// Install a predefined package set
bool installed = packageManager.InstallPackageSet("DataScienceBasic");
if (installed)
{
    Console.WriteLine("Data Science package set installed successfully");
}

// Create a custom package set from current environment
bool saved = packageManager.SavePackageSetFromCurrentEnvironment(
    "MyCustomSet", 
    "Custom package set for my project requirements");

if (saved)
{
    Console.WriteLine("Custom package set saved successfully");
}

// Upgrade all packages in the environment
Console.WriteLine("Checking for package upgrades...");
bool upgraded = packageManager.UpgradeAllPackagesAsync();
if (upgraded)
{
    Console.WriteLine("All packages upgraded successfully");
    
    // Save updated environment as a new package set
    packageManager.SavePackageSetFromCurrentEnvironment(
        "MyCustomSet_Updated",
        "Updated version of custom package set");
}</code></pre>
                    </div>

                    <div class="code-example">
                        <h3>Advanced Package Operations with Progress Tracking</h3>
                        <pre><code class="language-csharp">// Set up progress tracking
packageManager.Progress = new Progress&lt;PassedArgs&gt;(args =>
{
    Console.WriteLine($"[{args.EventType}] {args.Messege}");
    if (args.Flag == Errors.Failed)
    {
        Console.WriteLine($"Error occurred: {args.Messege}");
    }
});

// Check if manager is busy before operations
if (!packageManager.IsBusy)
{
    // Perform bulk operations
    var packagesToInstall = new[]
    {
        "jupyter", "ipython", "notebook",
        "plotly", "bokeh", "altair",
        "pytest", "black", "flake8"
    };

    foreach (var package in packagesToInstall)
    {
        if (!packageManager.IsBusy)
        {
            Console.WriteLine($"Installing {package}...");
            bool result = packageManager.InstallNewPackageAsync(package);
            
            if (result)
            {
                // Set appropriate category based on package purpose
                var category = package switch
                {
                    "jupyter" or "ipython" or "notebook" => PackageCategory.Development,
                    "plotly" or "bokeh" or "altair" => PackageCategory.Visualization,
                    "pytest" or "black" or "flake8" => PackageCategory.Testing,
                    _ => PackageCategory.Utilities
                };
                
                packageManager.SetPackageCategory(package, category);
            }
        }
    }
    
    // Final refresh and summary
    packageManager.RefreshAllPackagesAsync();
    Console.WriteLine("Package installation and categorization completed");
}</code></pre>
                    </div>
                </section>

                <!-- Best Practices -->
                <section class="section" id="best-practices">
                    <h2>Best Practices</h2>

                    <h3>?? Package Management</h3>
                    <ul>
                        <li><strong>Environment isolation:</strong> Always use virtual environments for package management</li>
                        <li><strong>Requirements files:</strong> Maintain requirements.txt files for reproducible environments</li>
                        <li><strong>Version pinning:</strong> Pin package versions in production environments</li>
                        <li><strong>Regular updates:</strong> Regularly check and update packages for security</li>
                    </ul>

                    <h3>?? Operational Excellence</h3>
                    <ul>
                        <li><strong>Progress monitoring:</strong> Always implement progress reporting for long operations</li>
                        <li><strong>Error handling:</strong> Implement proper error handling and logging</li>
                        <li><strong>Cancellation support:</strong> Use cancellation tokens for long-running operations</li>
                        <li><strong>Resource management:</strong> Properly dispose of managers when done</li>
                    </ul>

                    <h3>?? Organization</h3>
                    <ul>
                        <li><strong>Package categorization:</strong> Use categories to organize packages by purpose</li>
                        <li><strong>Package sets:</strong> Create package sets for common development scenarios</li>
                        <li><strong>Documentation:</strong> Document package purposes and dependencies</li>
                        <li><strong>Testing:</strong> Test package installations in isolated environments first</li>
                    </ul>

                    <div class="tip">
                        <strong>?? Performance Tip</strong>
                        <p>Use bulk operations and package sets to reduce individual package operation overhead and improve installation speed.</p>
                    </div>

                    <div class="warning">
                        <strong>?? Important</strong>
                        <p>Always check IsBusy before performing operations, and ensure proper disposal of the package manager to prevent resource leaks.</p>
                    </div>
                </section>

                <!-- See Also -->
                <section class="section" id="see-also">
                    <h2>See Also</h2>
                    <ul>
                        <li><a href="PythonVirtualEnvManager.html">PythonVirtualEnvManager</a> - Virtual environment management for package isolation</li>
                        <li><a href="package-management.html">Package Management Guide</a> - Comprehensive package management documentation</li>
                        <li><a href="PythonNetRunTimeManager.html">PythonNetRunTimeManager</a> - Main runtime manager coordination</li>
                        <li><a href="virtual-environments.html">Virtual Environments</a> - Advanced virtual environment usage</li>
                    </ul>
                </section>

                <!-- Navigation Links -->
                <div class="nav-links">
                    <a href="PythonVirtualEnvManager.html">
                        <i class="bi bi-arrow-left"></i> PythonVirtualEnvManager
                    </a>
                    <a href="PythonMLManager.html">
                        <i class="bi bi-arrow-right"></i> PythonMLManager
                    </a>
                </div>

                <!-- Footer -->
                <footer class="documentation-footer">
                    <div class="footer-content">
                        <div class="footer-copyright">
                            <p>&copy; 2024 The Tech Idea - Beep.Python.Runtime.PythonNet Documentation</p>
                        </div>
                        <div class="footer-links">
                            <a href="index.html">Home</a>
                            <a href="api-reference.html">API Reference</a>
                        </div>
                    </div>
                </footer>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="navigation.js"></script>
    <script>
        // Simplified navigation functionality for embedded sidebar
        document.addEventListener('DOMContentLoaded', function() {
            setupSubmenuToggles();
            initializeTheme();
            setupCodeCopy();
        });

        // Setup submenu toggle functionality
        function setupSubmenuToggles() {
            const submenuItems = document.querySelectorAll('.has-submenu > a');
            
            submenuItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const parent = this.parentElement;
                    parent.classList.toggle('open');
                });
            });
        }

        // Toggle sidebar for mobile
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            if (sidebar) {
                sidebar.classList.toggle('open');
            }
        }

        // Search functionality
        function searchDocs(query) {
            const links = document.querySelectorAll('.nav-menu a');
            const lowerQuery = query.toLowerCase();
            
            links.forEach(link => {
                const text = link.textContent.toLowerCase();
                const listItem = link.closest('li');
                
                if (text.includes(lowerQuery) || lowerQuery === '') {
                    listItem.style.display = '';
                } else {
                    listItem.style.display = 'none';
                }
            });
        }

        // Theme toggle functionality
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update theme icon
            const themeIcon = document.getElementById('theme-icon');
            if (themeIcon) {
                themeIcon.className = newTheme === 'dark' ? 'bi bi-sun-fill' : 'bi bi-moon-fill';
            }
        }

        // Initialize theme from localStorage
        function initializeTheme() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            const themeIcon = document.getElementById('theme-icon');
            if (themeIcon) {
                themeIcon.className = savedTheme === 'dark' ? 'bi bi-sun-fill' : 'bi bi-moon-fill';
            }
        }

        // Copy code functionality
        function setupCodeCopy() {
            const codeBlocks = document.querySelectorAll('pre code');
            
            codeBlocks.forEach(block => {
                const button = document.createElement('button');
                button.textContent = 'Copy';
                button.style.cssText = `
                    position: absolute;
                    top: 8px;
                    right: 8px;
                    background: var(--color-brand-primary);
                    color: white;
                    border: none;
                    border-radius: 4px;
                    padding: 4px 8px;
                    font-size: 12px;
                    cursor: pointer;
                    opacity: 0;
                    transition: opacity 0.3s ease;
                `;
                
                const pre = block.parentElement;
                pre.style.position = 'relative';
                pre.appendChild(button);
                
                pre.addEventListener('mouseenter', () => {
                    button.style.opacity = '1';
                });
                
                pre.addEventListener('mouseleave', () => {
                    button.style.opacity = '0';
                });
                
                button.addEventListener('click', () => {
                    navigator.clipboard.writeText(block.textContent).then(() => {
                        button.textContent = 'Copied!';
                        setTimeout(() => {
                            button.textContent = 'Copy';
                        }, 2000);
                    });
                });
            });
        }
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>