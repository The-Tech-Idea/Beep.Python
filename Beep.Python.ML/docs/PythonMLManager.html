<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PythonMLManager - Beep.Python.ML</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <link href="assets/styles.css" rel="stylesheet">
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" onclick="toggleSidebar()">
        <i class="bi bi-list"></i>
    </button>

    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
        <i class="bi bi-sun-fill" id="theme-icon"></i>
    </button>

    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <!-- Navigation will be loaded dynamically -->
        </aside>

        <!-- Main Content -->
        <main class="content">
            <div class="content-wrapper">
                <!-- Page Header -->
                <div class="page-header">
                    <div class="header-content">
                        <h1><i class="bi bi-cpu text-primary"></i> PythonMLManager</h1>
                        <p class="lead">The core machine learning manager class providing comprehensive ML capabilities with 13 specialized assistant classes for .NET 6, 7, 8, and 9</p>
                        
                        <div class="achievement-badges">
                            <span class="badge bg-success"><i class="bi bi-check-circle"></i> Core ML Class</span>
                            <span class="badge bg-info"><i class="bi bi-cpu"></i> Session Management</span>
                            <span class="badge bg-warning"><i class="bi bi-tools"></i> 13 Assistants</span>
                            <span class="badge bg-primary"><i class="bi bi-star"></i> Template-Based</span>
                        </div>
                    </div>
                </div>

                <!-- Class Overview -->
                <section class="section" id="class-overview">
                    <h2>?? Class Overview</h2>
                    <p>PythonMLManager is the central class in Beep.Python.ML that provides comprehensive machine learning capabilities through a clean, template-based architecture with zero inline Python code.</p>
                    
                    <div class="code-example">
                        <h4>Class Declaration</h4>
                        <pre><code class="language-csharp">public class PythonMLManager : IPythonMLManager
{
    // Core ML operations interface implementation
    
    // 13 Specialized Assistant Classes
    public PythonDataPreprocessingAssistant DataPreprocessing { get; }
    public PythonFeatureEngineeringAssistant FeatureEngineering { get; }
    public PythonCategoricalEncodingAssistant CategoricalEncoding { get; }
    public PythonTextProcessingAssistant TextProcessing { get; }
    public PythonDateTimeProcessingAssistant DateTimeProcessing { get; }
    public PythonImbalancedDataAssistant ImbalancedData { get; }
    public PythonTimeSeriesAssistant TimeSeries { get; }
    public PythonFeatureSelectionAssistant FeatureSelection { get; }
    public PythonCrossValidationAssistant CrossValidation { get; }
    public PythonDataCleaningAssistant DataCleaning { get; }
    public PythonDimensionalityReductionAssistant DimensionalityReduction { get; }
    public PythonVisualizationAssistant Visualization { get; }
    public PythonUtilityAssistant Utilities { get; }
}</code></pre>
                    </div>
                </section>

                <!-- Constructor -->
                <section class="section" id="constructor">
                    <h2>??? Constructor</h2>
                    
                    <div class="method">
                        <h3><i class="bi bi-gear"></i> PythonMLManager Constructor</h3>
                        
                        <div class="code-example">
                            <h4>Constructor Signature</h4>
                            <pre><code class="language-csharp">public PythonMLManager(
    IBeepService beepService,
    IPythonNetRunTimeManager pythonRuntime,
    PythonSessionInfo sessionInfo)</code></pre>
                        </div>

                        <div class="parameters">
                            <h5>Parameters</h5>
                            <ul>
                                <li><strong>beepService</strong> (IBeepService): Core Beep framework service container</li>
                                <li><strong>pythonRuntime</strong> (IPythonNetRunTimeManager): Python.NET runtime manager</li>
                                <li><strong>sessionInfo</strong> (PythonSessionInfo): Session configuration information</li>
                            </ul>
                        </div>

                        <div class="code-example">
                            <h4>Usage Example</h4>
                            <pre><code class="language-csharp">// Initialize dependencies
var beepService = new BeepService();
var pythonRuntime = new PythonNetRunTimeManager(beepService);
var sessionInfo = new PythonSessionInfo
{
    Username = "ml_engineer",
    SessionId = Guid.NewGuid().ToString(),
    CreateTime = DateTime.UtcNow
};

// Create ML Manager
var mlManager = new PythonMLManager(beepService, pythonRuntime, sessionInfo);

// Configure session
bool configured = mlManager.ConfigureMLSessionForUser("ml_engineer");
if (!configured)
{
    throw new InvalidOperationException("Failed to configure ML session");
}</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Core Properties -->
                <section class="section" id="properties">
                    <h2>?? Properties</h2>
                    
                    <div class="method">
                        <h3><i class="bi bi-database"></i> Pipeline State Properties</h3>
                        
                        <div class="code-example">
                            <h4>Data State Properties</h4>
                            <pre><code class="language-csharp">// Data loading and management state
public bool IsDataLoaded { get; set; }
public string DataFilePath { get; set; }
public bool IsDataSplit { get; set; }

// File path properties
public string TrainingFilePath { get; set; }
public string TestingFilePath { get; set; }
public string ValidationFilePath { get; set; }</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Model State Properties</h4>
                            <pre><code class="language-csharp">// Model training and evaluation state
public bool IsModelTrained { get; set; }
public bool IsModelSaved { get; set; }
public bool IsModelLoaded { get; set; }
public string ModelFilePath { get; set; }

// Prediction state
public bool IsModelPredicted { get; set; }
public bool IsModelScored { get; set; }
public bool IsModelExported { get; set; }
public string PredictionsFilePath { get; set; }</code></pre>
                        </div>
                    </div>

                    <div class="method">
                        <h3><i class="bi bi-tools"></i> Assistant Class Properties</h3>
                        
                        <div class="assistant-grid">
                            <div class="assistant-card">
                                <h5><i class="bi bi-database"></i> DataPreprocessing</h5>
                                <p>Data cleaning, scaling, normalization, missing value handling</p>
                                <code>manager.DataPreprocessing.StandardizeData()</code>
                            </div>
                            
                            <div class="assistant-card">
                                <h5><i class="bi bi-gear"></i> FeatureEngineering</h5>
                                <p>Feature creation, transformation, polynomial features</p>
                                <code>manager.FeatureEngineering.GeneratePolynomialFeatures()</code>
                            </div>
                            
                            <div class="assistant-card">
                                <h5><i class="bi bi-tags"></i> CategoricalEncoding</h5>
                                <p>One-hot, label, target encoding for categorical variables</p>
                                <code>manager.CategoricalEncoding.OneHotEncode()</code>
                            </div>
                            
                            <div class="assistant-card">
                                <h5><i class="bi bi-chat-text"></i> TextProcessing</h5>
                                <p>NLP operations, tokenization, TF-IDF vectorization</p>
                                <code>manager.TextProcessing.ApplyTFIDFVectorization()</code>
                            </div>
                            
                            <div class="assistant-card">
                                <h5><i class="bi bi-calendar"></i> DateTimeProcessing</h5>
                                <p>Date/time feature extraction, cyclical features</p>
                                <code>manager.DateTimeProcessing.ExtractDateTimeComponents()</code>
                            </div>
                            
                            <div class="assistant-card">
                                <h5><i class="bi bi-balance"></i> ImbalancedData</h5>
                                <p>SMOTE, undersampling, oversampling techniques</p>
                                <code>manager.ImbalancedData.ApplySMOTE()</code>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Core Methods -->
                <section class="section" id="core-methods">
                    <h2>?? Core Methods</h2>
                    
                    <div class="method">
                        <h3><i class="bi bi-database"></i> Data Loading Methods</h3>
                        
                        <div class="code-example">
                            <h4>ValidateAndPreviewData</h4>
                            <pre><code class="language-csharp">public string[] ValidateAndPreviewData(string filePath, int numRows = 5)

// Usage
var features = mlManager.ValidateAndPreviewData("customer_data.csv", numRows: 10);
Console.WriteLine($"Found {features.Length} features: {string.Join(", ", features)}");</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>LoadData</h4>
                            <pre><code class="language-csharp">public string[] LoadData(string filePath)
public string[] LoadData(string filePath, string[] selectedFeatures)

// Usage
var allFeatures = mlManager.LoadData("data.csv");
var selectedData = mlManager.LoadData("data.csv", new[] { "age", "income", "score" });</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>GetFeatures</h4>
                            <pre><code class="language-csharp">public string[] GetFeatures(string filePath)

// Usage
var availableFeatures = mlManager.GetFeatures("dataset.csv");
Console.WriteLine($"Available features: {string.Join(", ", availableFeatures)}");</code></pre>
                        </div>
                    </div>

                    <div class="method">
                        <h3><i class="bi bi-cpu"></i> Model Training Methods</h3>
                        
                        <div class="code-example">
                            <h4>TrainModel</h4>
                            <pre><code class="language-csharp">public void TrainModel(
    string modelId, 
    MachineLearningAlgorithm algorithm, 
    Dictionary&lt;string, object&gt; parameters, 
    string[] featureColumns, 
    string labelColumn)

// Usage
var parameters = new Dictionary&lt;string, object&gt;
{
    ["n_estimators"] = 200,
    ["max_depth"] = 15,
    ["min_samples_split"] = 5,
    ["random_state"] = 42
};

mlManager.TrainModel(
    "customer_churn_model", 
    MachineLearningAlgorithm.RandomForestClassifier, 
    parameters, 
    new[] { "age", "income", "tenure", "usage" }, 
    "churn");</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>TrainModelAsync</h4>
                            <pre><code class="language-csharp">public async Task&lt;bool&gt; TrainModelAsync(
    string modelId, 
    MachineLearningAlgorithm algorithm, 
    Dictionary&lt;string, object&gt; parameters, 
    string[] featureColumns, 
    string labelColumn, 
    CancellationToken cancellationToken = default)

// Usage
var success = await mlManager.TrainModelAsync(
    "async_model", 
    MachineLearningAlgorithm.GradientBoostingClassifier, 
    parameters, 
    features, 
    "target", 
    cancellationToken);</code></pre>
                        </div>
                    </div>

                    <div class="method">
                        <h3><i class="bi bi-chart-bar"></i> Model Evaluation Methods</h3>
                        
                        <div class="code-example">
                            <h4>GetModelClassificationScore</h4>
                            <pre><code class="language-csharp">public Tuple&lt;double, double&gt; GetModelClassificationScore(string modelId)

// Usage
var scores = mlManager.GetModelClassificationScore("customer_churn_model");
Console.WriteLine($"Accuracy: {scores.Item1:F4}");
Console.WriteLine($"F1-Score: {scores.Item2:F4}");</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>GetModelRegressionScores</h4>
                            <pre><code class="language-csharp">public Tuple&lt;double, double, double&gt; GetModelRegressionScores(string modelId)

// Usage
var scores = mlManager.GetModelRegressionScores("price_prediction_model");
Console.WriteLine($"R² Score: {scores.Item1:F4}");
Console.WriteLine($"MSE: {scores.Item2:F4}");
Console.WriteLine($"MAE: {scores.Item3:F4}");</code></pre>
                        </div>
                    </div>

                    <div class="method">
                        <h3><i class="bi bi-save"></i> Model Persistence Methods</h3>
                        
                        <div class="code-example">
                            <h4>SaveModel & LoadModel</h4>
                            <pre><code class="language-csharp">public void SaveModel(string modelId, string filePath)
public string LoadModel(string filePath)

// Usage
// Save trained model
mlManager.SaveModel("customer_churn_model", "models/churn_model.pkl");

// Load model for predictions
var loadedModelId = mlManager.LoadModel("models/churn_model.pkl");
Console.WriteLine($"Loaded model: {loadedModelId}");</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Session Management -->
                <section class="section" id="session-management">
                    <h2>?? Session Management Methods</h2>
                    
                    <div class="method">
                        <h3><i class="bi bi-key"></i> Session Configuration</h3>
                        
                        <div class="code-example">
                            <h4>ConfigureMLSessionForUser</h4>
                            <pre><code class="language-csharp">public bool ConfigureMLSessionForUser(string username, string? environmentId = null)

// Usage
bool configured = mlManager.ConfigureMLSessionForUser("data_scientist");
if (!configured)
{
    throw new InvalidOperationException("Failed to configure ML session");
}</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Session Status Methods</h4>
                            <pre><code class="language-csharp">public bool IsSessionConfigured()
public PythonSessionInfo? GetConfiguredSession()
public PythonVirtualEnvironment? GetConfiguredVirtualEnvironment()

// Usage
if (!mlManager.IsSessionConfigured())
{
    mlManager.ConfigureMLSessionForUser("user");
}

var session = mlManager.GetConfiguredSession();
var virtualEnv = mlManager.GetConfiguredVirtualEnvironment();
Console.WriteLine($"Session: {session?.Username}, Environment: {virtualEnv?.Name}");</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Usage Examples -->
                <section class="section" id="usage-examples">
                    <h2>?? Complete Usage Examples</h2>
                    
                    <div class="code-example">
                        <h4>Complete ML Pipeline with PythonMLManager</h4>
                        <pre><code class="language-csharp">public async Task RunCompleteMLPipeline()
{
    // 1. Initialize PythonMLManager
    var beepService = new BeepService();
    var pythonRuntime = new PythonNetRunTimeManager(beepService);
    var sessionInfo = new PythonSessionInfo { Username = "ml_engineer" };
    
    var mlManager = new PythonMLManager(beepService, pythonRuntime, sessionInfo);
    
    // 2. Configure session
    if (!mlManager.ConfigureMLSessionForUser("ml_engineer"))
    {
        throw new InvalidOperationException("Session configuration failed");
    }
    
    // 3. Data loading and validation
    var features = mlManager.ValidateAndPreviewData("customer_data.csv", 10);
    var loadedFeatures = mlManager.LoadData("customer_data.csv");
    
    // 4. Advanced preprocessing using assistant classes
    if (mlManager is PythonMLManager manager)
    {
        // Data preprocessing
        manager.DataPreprocessing.ImputeMissingValues("median");
        manager.DataPreprocessing.RobustScaleData();
        
        // Categorical encoding
        var categoricalFeatures = manager.CategoricalEncoding.GetCategoricalFeatures(loadedFeatures);
        manager.CategoricalEncoding.TargetEncode(categoricalFeatures, "churn");
        
        // Feature engineering
        manager.FeatureEngineering.GeneratePolynomialFeatures(degree: 2, interactionOnly: true);
        manager.FeatureEngineering.ApplyLogTransformation(new[] { "income", "spending" });
        
        // Feature selection
        manager.FeatureSelection.ApplyVarianceThreshold(0.01);
        manager.FeatureSelection.ApplyCorrelationThreshold(0.95);
        
        // Handle imbalanced data
        manager.ImbalancedData.ApplySMOTE("churn", 1.0f);
        
        // Data splitting
        var splitPaths = manager.Utilities.SplitData(
            "processed_data.csv", 0.2f, 0.1f,
            "train.csv", "test.csv", "validation.csv",
            "customer_id", "churn");
    }
    
    // 5. Model training
    var modelId = "churn_prediction_model";
    var parameters = new Dictionary&lt;string, object&gt;
    {
        ["n_estimators"] = 200,
        ["max_depth"] = 15,
        ["class_weight"] = "balanced",
        ["random_state"] = 42
    };
    
    await mlManager.TrainModelAsync(
        modelId, 
        MachineLearningAlgorithm.RandomForestClassifier, 
        parameters, 
        loadedFeatures.Where(f => f != "churn" && f != "customer_id").ToArray(), 
        "churn");
    
    // 6. Model evaluation
    var scores = mlManager.GetModelClassificationScore(modelId);
    Console.WriteLine($"Model Performance - Accuracy: {scores.Item1:F4}, F1-Score: {scores.Item2:F4}");
    
    // 7. Cross-validation and visualization
    if (mlManager is PythonMLManager evalManager)
    {
        evalManager.CrossValidation.PerformCrossValidation(modelId, 10);
        evalManager.Visualization.CreateROC(modelId, "outputs/roc_curve.png");
        evalManager.Visualization.CreateConfusionMatrix(modelId, "outputs/confusion_matrix.png");
        evalManager.Visualization.GenerateEvaluationReport(modelId, "outputs/evaluation_report.html");
    }
    
    // 8. Save model and make predictions
    mlManager.SaveModel(modelId, "models/churn_model.pkl");
    var predictions = mlManager.PredictClassification(
        loadedFeatures.Where(f => f != "churn" && f != "customer_id").ToArray());
    
    Console.WriteLine("? Complete ML pipeline executed successfully!");
}</code></pre>
                    </div>
                </section>

                <!-- Navigation Links -->
                <div class="nav-links">
                    <a href="index.html" class="btn-beep">
                        <i class="bi bi-house"></i> Home
                    </a>
                    <a href="assistant-classes.html" class="btn-beep">
                        <i class="bi bi-tools"></i> Assistant Classes
                    </a>
                    <a href="api-reference.html" class="btn-beep">
                        <i class="bi bi-book"></i> API Reference
                    </a>
                </div>

                <!-- Footer -->
                <footer class="documentation-footer">
                    <div class="footer-content">
                        <div class="footer-copyright">
                            <p>&copy; 2024 The Tech Idea - Beep.Python.ML PythonMLManager Documentation</p>
                            <p>Core ML Manager Class for .NET 6, 7, 8, and 9</p>
                        </div>
                        <div class="footer-links">
                            <a href="#class-overview">Class Overview</a>
                            <a href="#core-methods">Core Methods</a>
                            <a href="#session-management">Session Management</a>
                            <a href="#usage-examples">Examples</a>
                        </div>
                    </div>
                </footer>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="assets/navigation.js"></script>
</body>
</html>