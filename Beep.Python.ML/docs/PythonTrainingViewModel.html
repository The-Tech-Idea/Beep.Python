<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PythonTrainingViewModel - Beep.Python.ML</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet">
    <link href="assets/styles.css" rel="stylesheet">
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" onclick="toggleSidebar()">
        <i class="bi bi-list"></i>
    </button>

    <!-- Theme Toggle -->
    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle theme">
        <i class="bi bi-sun-fill" id="theme-icon"></i>
    </button>

    <div class="container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <!-- Navigation will be loaded dynamically -->
        </aside>

        <!-- Main Content -->
        <main class="content">
            <div class="content-wrapper">
                <!-- Page Header -->
                <div class="page-header">
                    <div class="header-content">
                        <h1><i class="bi bi-laptop text-primary"></i> PythonTrainingViewModel</h1>
                        <p class="lead">MVVM ViewModel for ML model training workflows with observable properties, progress tracking, and async operations supporting .NET 6, 7, 8, and 9</p>
                        
                        <div class="achievement-badges">
                            <span class="badge bg-success"><i class="bi bi-check-circle"></i> MVVM Architecture</span>
                            <span class="badge bg-info"><i class="bi bi-cpu"></i> Async Training</span>
                            <span class="badge bg-warning"><i class="bi bi-tools"></i> Progress Tracking</span>
                            <span class="badge bg-primary"><i class="bi bi-star"></i> Observable Properties</span>
                        </div>
                    </div>
                </div>

                <!-- Class Overview -->
                <section class="section" id="class-overview">
                    <h2>?? Class Overview</h2>
                    <p>PythonTrainingViewModel provides a complete MVVM architecture for machine learning model training workflows, featuring observable properties, async operations, and real-time progress tracking.</p>
                    
                    <div class="code-example">
                        <h4>Class Declaration</h4>
                        <pre><code class="language-csharp">public partial class PythonTrainingViewModel : PythonBaseViewModel
{
    // Observable properties for UI binding
    [ObservableProperty] private bool isTraining;
    [ObservableProperty] private bool isDataLoaded;
    [ObservableProperty] private double trainingProgress;
    [ObservableProperty] private string currentStatus;
    
    // Training configuration
    [ObservableProperty] private MachineLearningAlgorithm selectedAlgorithm;
    [ObservableProperty] private Dictionary&lt;string, object&gt; hyperParameters;
    
    // Results and metrics
    [ObservableProperty] private double accuracy;
    [ObservableProperty] private double f1Score;
    [ObservableProperty] private double precision;
    [ObservableProperty] private double recall;
    
    // Commands for UI interactions
    public IAsyncRelayCommand StartTrainingCommand { get; }
    public IAsyncRelayCommand StopTrainingCommand { get; }
    public IRelayCommand LoadDataCommand { get; }
    public IRelayCommand SaveModelCommand { get; }
}</code></pre>
                    </div>
                </section>

                <!-- Observable Properties -->
                <section class="section" id="observable-properties">
                    <h2>?? Observable Properties</h2>
                    
                    <div class="method">
                        <h3><i class="bi bi-eye"></i> Training State Properties</h3>
                        
                        <div class="code-example">
                            <h4>Training Status Properties</h4>
                            <pre><code class="language-csharp">// Training state management
[ObservableProperty] private bool isTraining;
[ObservableProperty] private bool isDataLoaded;
[ObservableProperty] private bool isModelTrained;
[ObservableProperty] private bool isValidationInProgress;

// Progress tracking
[ObservableProperty] private double trainingProgress;
[ObservableProperty] private string currentStatus;
[ObservableProperty] private int currentEpoch;
[ObservableProperty] private int totalEpochs;

// Usage in UI
&lt;ProgressBar Value="{Binding TrainingProgress}" Maximum="100" /&gt;
&lt;TextBlock Text="{Binding CurrentStatus}" /&gt;
&lt;Button IsEnabled="{Binding IsTraining, Converter={StaticResource InverseBooleanConverter}}" /&gt;</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Model Configuration Properties</h4>
                            <pre><code class="language-csharp">// Algorithm selection
[ObservableProperty] private MachineLearningAlgorithm selectedAlgorithm;
[ObservableProperty] private ObservableCollection&lt;MachineLearningAlgorithm&gt; availableAlgorithms;

// Hyperparameters
[ObservableProperty] private Dictionary&lt;string, object&gt; hyperParameters;
[ObservableProperty] private ObservableCollection&lt;ParameterInfo&gt; parameterDefinitions;

// Data configuration
[ObservableProperty] private string[] selectedFeatures;
[ObservableProperty] private string labelColumn;
[ObservableProperty] private double testSize;
[ObservableProperty] private int randomState;</code></pre>
                        </div>
                    </div>

                    <div class="method">
                        <h3><i class="bi bi-chart-bar"></i> Performance Metrics Properties</h3>
                        
                        <div class="code-example">
                            <h4>Classification Metrics</h4>
                            <pre><code class="language-csharp">// Classification performance metrics
[ObservableProperty] private double accuracy;
[ObservableProperty] private double f1Score;
[ObservableProperty] private double precision;
[ObservableProperty] private double recall;
[ObservableProperty] private double rocAuc;

// Confusion matrix data
[ObservableProperty] private int[,] confusionMatrix;
[ObservableProperty] private ObservableCollection&lt;ClassificationReport&gt; classificationReport;

// Cross-validation results
[ObservableProperty] private double cvMeanScore;
[ObservableProperty] private double cvStdScore;
[ObservableProperty] private ObservableCollection&lt;double&gt; cvScores;</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Regression Metrics</h4>
                            <pre><code class="language-csharp">// Regression performance metrics
[ObservableProperty] private double r2Score;
[ObservableProperty] private double meanSquaredError;
[ObservableProperty] private double meanAbsoluteError;
[ObservableProperty] private double rootMeanSquaredError;

// Residual analysis
[ObservableProperty] private ObservableCollection&lt;ResidualPoint&gt; residualData;
[ObservableProperty] private double residualStandardError;</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Commands and Async Operations -->
                <section class="section" id="commands-async">
                    <h2>? Commands and Async Operations</h2>
                    
                    <div class="method">
                        <h3><i class="bi bi-play-circle"></i> Training Commands</h3>
                        
                        <div class="code-example">
                            <h4>Command Definitions</h4>
                            <pre><code class="language-csharp">public PythonTrainingViewModel(IBeepService beepService, 
                                     IPythonNetRunTimeManager pythonRuntime, 
                                     PythonSessionInfo sessionInfo)
    : base(beepService, pythonRuntime, sessionInfo)
{
    // Initialize commands
    StartTrainingCommand = new AsyncRelayCommand(StartTrainingAsync, CanStartTraining);
    StopTrainingCommand = new AsyncRelayCommand(StopTrainingAsync, () => IsTraining);
    LoadDataCommand = new RelayCommand(LoadData, CanLoadData);
    SaveModelCommand = new RelayCommand(SaveModel, () => IsModelTrained);
    
    // Initialize collections
    AvailableAlgorithms = new ObservableCollection&lt;MachineLearningAlgorithm&gt;();
    ParameterDefinitions = new ObservableCollection&lt;ParameterInfo&gt;();
    CvScores = new ObservableCollection&lt;double&gt;();
    
    InitializeAlgorithms();
}</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Start Training Implementation</h4>
                            <pre><code class="language-csharp">private async Task StartTrainingAsync()
{
    try
    {
        IsTraining = true;
        TrainingProgress = 0;
        CurrentStatus = "Initializing training...";
        
        // Prepare training data
        CurrentStatus = "Preparing data...";
        await PrepareDataAsync();
        TrainingProgress = 20;
        
        // Configure model
        CurrentStatus = "Configuring model...";
        ConfigureModel();
        TrainingProgress = 30;
        
        // Start training with progress reporting
        var progress = new Progress&lt;TrainingProgress&gt;(OnTrainingProgressChanged);
        CurrentStatus = "Training model...";
        
        var trainingResult = await MLManager.TrainModelAsync(
            selectedAlgorithm: SelectedAlgorithm,
            hyperParameters: HyperParameters,
            features: SelectedFeatures,
            labelColumn: LabelColumn,
            progress: progress,
            cancellationToken: CancellationToken.None);
        
        if (trainingResult.Success)
        {
            // Update metrics
            await UpdatePerformanceMetricsAsync(trainingResult.ModelId);
            IsModelTrained = true;
            CurrentStatus = "Training completed successfully!";
            TrainingProgress = 100;
        }
        else
        {
            CurrentStatus = $"Training failed: {trainingResult.ErrorMessage}";
        }
    }
    catch (Exception ex)
    {
        CurrentStatus = $"Training error: {ex.Message}";
        Logger.WriteLog($"Training error: {ex}", LogType.Error);
    }
    finally
    {
        IsTraining = false;
    }
}</code></pre>
                        </div>
                    </div>

                    <div class="method">
                        <h3><i class="bi bi-graph-up"></i> Progress Tracking</h3>
                        
                        <div class="code-example">
                            <h4>Progress Reporting Implementation</h4>
                            <pre><code class="language-csharp">private void OnTrainingProgressChanged(TrainingProgress progress)
{
    // Update UI thread safely
    Dispatcher.BeginInvoke(() =>
    {
        TrainingProgress = progress.Percentage;
        CurrentStatus = progress.Message;
        CurrentEpoch = progress.CurrentEpoch;
        TotalEpochs = progress.TotalEpochs;
        
        // Update real-time metrics if available
        if (progress.CurrentMetrics != null)
        {
            Accuracy = progress.CurrentMetrics.Accuracy;
            F1Score = progress.CurrentMetrics.F1Score;
            Precision = progress.CurrentMetrics.Precision;
            Recall = progress.CurrentMetrics.Recall;
        }
    });
}

public class TrainingProgress
{
    public double Percentage { get; set; }
    public string Message { get; set; }
    public int CurrentEpoch { get; set; }
    public int TotalEpochs { get; set; }
    public MetricsSnapshot CurrentMetrics { get; set; }
    public TimeSpan ElapsedTime { get; set; }
    public TimeSpan EstimatedTimeRemaining { get; set; }
}</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Hyperparameter Management -->
                <section class="section" id="hyperparameter-management">
                    <h2>?? Hyperparameter Management</h2>
                    
                    <div class="method">
                        <h3><i class="bi bi-gear"></i> Dynamic Parameter Configuration</h3>
                        
                        <div class="code-example">
                            <h4>Algorithm-Specific Parameters</h4>
                            <pre><code class="language-csharp">partial void OnSelectedAlgorithmChanged(MachineLearningAlgorithm value)
{
    // Update parameter definitions based on selected algorithm
    UpdateParameterDefinitions(value);
    
    // Set default hyperparameters
    SetDefaultHyperParameters(value);
}

private void UpdateParameterDefinitions(MachineLearningAlgorithm algorithm)
{
    ParameterDefinitions.Clear();
    
    switch (algorithm)
    {
        case MachineLearningAlgorithm.RandomForestClassifier:
            ParameterDefinitions.Add(new ParameterInfo
            {
                Name = "n_estimators",
                Type = typeof(int),
                DefaultValue = 100,
                Range = new Range(10, 1000),
                Description = "Number of trees in the forest"
            });
            ParameterDefinitions.Add(new ParameterInfo
            {
                Name = "max_depth",
                Type = typeof(int?),
                DefaultValue = null,
                Range = new Range(1, 50),
                Description = "Maximum depth of trees"
            });
            break;
            
        case MachineLearningAlgorithm.LogisticRegression:
            ParameterDefinitions.Add(new ParameterInfo
            {
                Name = "C",
                Type = typeof(double),
                DefaultValue = 1.0,
                Range = new Range(0.001, 100.0),
                Description = "Regularization strength"
            });
            break;
    }
}</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Hyperparameter Optimization Integration</h4>
                            <pre><code class="language-csharp">public async Task OptimizeHyperParametersAsync()
{
    try
    {
        CurrentStatus = "Starting hyperparameter optimization...";
        IsTraining = true;
        
        // Define parameter grid based on current parameter definitions
        var parameterGrid = CreateParameterGrid();
        
        var optimizationProgress = new Progress&lt;OptimizationProgress&gt;(OnOptimizationProgressChanged);
        
        var result = await MLManager.OptimizeHyperParametersAsync(
            algorithm: SelectedAlgorithm,
            parameterGrid: parameterGrid,
            features: SelectedFeatures,
            labelColumn: LabelColumn,
            cvFolds: 5,
            scoringMetric: "f1_weighted",
            progress: optimizationProgress);
        
        if (result.Success)
        {
            // Update with best parameters
            HyperParameters = result.BestParameters;
            CurrentStatus = $"Optimization completed. Best CV Score: {result.BestScore:F4}";
            
            // Automatically start training with optimized parameters
            await StartTrainingAsync();
        }
    }
    catch (Exception ex)
    {
        CurrentStatus = $"Optimization failed: {ex.Message}";
    }
    finally
    {
        IsTraining = false;
    }
}</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Data Binding Examples -->
                <section class="section" id="data-binding">
                    <h2>?? Data Binding Examples</h2>
                    
                    <div class="method">
                        <h3><i class="bi bi-link"></i> WPF/MAUI Binding Examples</h3>
                        
                        <div class="code-example">
                            <h4>XAML Data Binding</h4>
                            <pre><code class="language-xml">&lt;!-- Training Controls --&gt;
&lt;StackPanel Orientation="Horizontal"&gt;
    &lt;Button Content="Start Training" 
            Command="{Binding StartTrainingCommand}"
            IsEnabled="{Binding IsTraining, Converter={StaticResource InverseBooleanConverter}}" /&gt;
    
    &lt;Button Content="Stop Training"
            Command="{Binding StopTrainingCommand}"
            IsEnabled="{Binding IsTraining}" /&gt;
&lt;/StackPanel&gt;

&lt;!-- Progress Tracking --&gt;
&lt;ProgressBar Value="{Binding TrainingProgress}" 
             Maximum="100" 
             Height="20" 
             Margin="10" /&gt;

&lt;TextBlock Text="{Binding CurrentStatus}" 
           FontWeight="Bold" 
           Margin="10,5" /&gt;

&lt;!-- Algorithm Selection --&gt;
&lt;ComboBox ItemsSource="{Binding AvailableAlgorithms}"
          SelectedItem="{Binding SelectedAlgorithm}"
          DisplayMemberPath="Name" /&gt;

&lt;!-- Performance Metrics --&gt;
&lt;Grid&gt;
    &lt;Grid.ColumnDefinitions&gt;
        &lt;ColumnDefinition Width="*" /&gt;
        &lt;ColumnDefinition Width="*" /&gt;
    &lt;/Grid.ColumnDefinitions&gt;
    
    &lt;StackPanel Grid.Column="0"&gt;
        &lt;TextBlock Text="{Binding Accuracy, StringFormat='Accuracy: {0:P2}'}" /&gt;
        &lt;TextBlock Text="{Binding F1Score, StringFormat='F1-Score: {0:F4}'}" /&gt;
    &lt;/StackPanel&gt;
    
    &lt;StackPanel Grid.Column="1"&gt;
        &lt;TextBlock Text="{Binding Precision, StringFormat='Precision: {0:F4}'}" /&gt;
        &lt;TextBlock Text="{Binding Recall, StringFormat='Recall: {0:F4}'}" /&gt;
    &lt;/StackPanel&gt;
&lt;/Grid&gt;</code></pre>
                        </div>

                        <div class="code-example">
                            <h4>Blazor Component Binding</h4>
                            <pre><code class="language-razor">@* Training Controls *@
&lt;div class="training-controls"&gt;
    &lt;button class="btn btn-primary" 
            @onclick="ViewModel.StartTrainingCommand.ExecuteAsync"
            disabled="@ViewModel.IsTraining"&gt;
        @if (ViewModel.IsTraining)
        {
            &lt;span class="spinner-border spinner-border-sm" role="status"&gt;&lt;/span&gt;
            Training...
        }
        else
        {
            &lt;i class="bi bi-play-fill"&gt;&lt;/i&gt; Start Training
        }
    &lt;/button&gt;
    
    &lt;button class="btn btn-danger" 
            @onclick="ViewModel.StopTrainingCommand.ExecuteAsync"
            disabled="@(!ViewModel.IsTraining)"&gt;
        &lt;i class="bi bi-stop-fill"&gt;&lt;/i&gt; Stop Training
    &lt;/button&gt;
&lt;/div&gt;

@* Progress Display *@
&lt;div class="progress mb-3"&gt;
    &lt;div class="progress-bar" 
         role="progressbar" 
         style="width: @(ViewModel.TrainingProgress)%"
         aria-valuenow="@ViewModel.TrainingProgress" 
         aria-valuemin="0" 
         aria-valuemax="100"&gt;
        @ViewModel.TrainingProgress.ToString("F1")%
    &lt;/div&gt;
&lt;/div&gt;

&lt;p class="status-text"&gt;@ViewModel.CurrentStatus&lt;/p&gt;

@* Performance Metrics *@
@if (ViewModel.IsModelTrained)
{
    &lt;div class="metrics-grid"&gt;
        &lt;div class="metric-card"&gt;
            &lt;h5&gt;Accuracy&lt;/h5&gt;
            &lt;p class="metric-value"&gt;@ViewModel.Accuracy.ToString("P2")&lt;/p&gt;
        &lt;/div&gt;
        &lt;div class="metric-card"&gt;
            &lt;h5&gt;F1-Score&lt;/h5&gt;
            &lt;p class="metric-value"&gt;@ViewModel.F1Score.ToString("F4")&lt;/p&gt;
        &lt;/div&gt;
    &lt;/div&gt;
}</code></pre>
                        </div>
                    </div>
                </section>

                <!-- Usage Examples -->
                <section class="section" id="usage-examples">
                    <h2>?? Complete Usage Examples</h2>
                    
                    <div class="code-example">
                        <h4>Complete Training Workflow</h4>
                        <pre><code class="language-csharp">// Initialize ViewModel in your View
public partial class TrainingWindow : Window
{
    public PythonTrainingViewModel ViewModel { get; }
    
    public TrainingWindow()
    {
        InitializeComponent();
        
        // Initialize dependencies
        var beepService = new BeepService();
        var pythonRuntime = new PythonNetRunTimeManager(beepService);
        var sessionInfo = new PythonSessionInfo { Username = "ml_engineer" };
        
        // Create and configure ViewModel
        ViewModel = new PythonTrainingViewModel(beepService, pythonRuntime, sessionInfo);
        
        // Set data context for binding
        DataContext = ViewModel;
        
        // Subscribe to events
        ViewModel.PropertyChanged += OnViewModelPropertyChanged;
    }
    
    private void OnViewModelPropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        switch (e.PropertyName)
        {
            case nameof(PythonTrainingViewModel.IsModelTrained):
                if (ViewModel.IsModelTrained)
                {
                    ShowTrainingCompletedDialog();
                }
                break;
                
            case nameof(PythonTrainingViewModel.TrainingProgress):
                // Update taskbar progress (Windows)
                TaskbarItemInfo.ProgressValue = ViewModel.TrainingProgress / 100.0;
                break;
        }
    }
}</code></pre>
                    </div>

                    <div class="code-example">
                        <h4>Advanced Training Configuration</h4>
                        <pre><code class="language-csharp">public async Task ConfigureAdvancedTrainingAsync()
{
    // Configure data
    ViewModel.SelectedFeatures = new[] { "age", "income", "tenure", "usage_pattern" };
    ViewModel.LabelColumn = "churn";
    ViewModel.TestSize = 0.2;
    ViewModel.RandomState = 42;
    
    // Select algorithm
    ViewModel.SelectedAlgorithm = MachineLearningAlgorithm.RandomForestClassifier;
    
    // Configure hyperparameters
    ViewModel.HyperParameters = new Dictionary&lt;string, object&gt;
    {
        ["n_estimators"] = 200,
        ["max_depth"] = 15,
        ["min_samples_split"] = 5,
        ["min_samples_leaf"] = 2,
        ["class_weight"] = "balanced",
        ["random_state"] = 42
    };
    
    // Optional: Optimize hyperparameters first
    await ViewModel.OptimizeHyperParametersAsync();
    
    // Start training
    await ViewModel.StartTrainingCommand.ExecuteAsync(null);
    
    // Wait for completion
    while (ViewModel.IsTraining)
    {
        await Task.Delay(1000);
    }
    
    // Display results
    Console.WriteLine($"Training completed with accuracy: {ViewModel.Accuracy:P2}");
}</code></pre>
                    </div>
                </section>

                <!-- Navigation Links -->
                <div class="nav-links">
                    <a href="PythonMachineLearningViewModel.html" class="btn-beep">
                        <i class="bi bi-laptop"></i> ML ViewModel
                    </a>
                    <a href="ModelEvaluationGraphsViewModel.html" class="btn-beep">
                        <i class="bi bi-graph-up"></i> Evaluation ViewModel
                    </a>
                    <a href="training-workflows.html" class="btn-beep">
                        <i class="bi bi-workflow"></i> Training Workflows
                    </a>
                </div>

                <!-- Footer -->
                <footer class="documentation-footer">
                    <div class="footer-content">
                        <div class="footer-copyright">
                            <p>&copy; 2024 The Tech Idea - Beep.Python.ML PythonTrainingViewModel Documentation</p>
                            <p>MVVM Training ViewModel for .NET 6, 7, 8, and 9</p>
                        </div>
                        <div class="footer-links">
                            <a href="#class-overview">Class Overview</a>
                            <a href="#observable-properties">Observable Properties</a>
                            <a href="#commands-async">Commands & Async</a>
                            <a href="#data-binding">Data Binding</a>
                        </div>
                    </div>
                </footer>
            </div>
        </main>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="assets/navigation.js"></script>
</body>
</html>